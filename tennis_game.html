<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RETRO TENNIS - PONG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1a1a1a;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #00ff00;
        }

        #gameContainer {
            background: #000;
            border: 4px solid #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        #gameCanvas {
            display: block;
            background: #000;
        }

        .info {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            max-width: 800px;
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }

        .player-controls {
            padding: 10px;
            border: 2px solid #00ff00;
            border-radius: 5px;
        }

        .player-controls h3 {
            margin-bottom: 8px;
            color: #00ff00;
        }

        .key {
            display: inline-block;
            padding: 5px 10px;
            margin: 2px;
            background: #003300;
            border: 2px solid #00ff00;
            border-radius: 3px;
            font-weight: bold;
        }

        .title {
            font-size: 24px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ff00;
        }

        button {
            margin-top: 15px;
            padding: 10px 20px;
            background: #003300;
            color: #00ff00;
            border: 2px solid #00ff00;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            background: #00ff00;
            color: #000;
            box-shadow: 0 0 15px #00ff00;
        }
    </style>
</head>
<body>
    <div class="title">ðŸŽ¾ RETRO TENNIS - PONG ðŸŽ¾</div>

    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
    </div>

    <div class="info">
        <div class="controls">
            <div class="player-controls">
                <h3>GRACZ 1 (Lewa paletka)</h3>
                <span class="key">W</span> - GÃ³ra<br>
                <span class="key">S</span> - DÃ³Å‚
            </div>
            <div class="player-controls">
                <h3>GRACZ 2 (Prawa paletka)</h3>
                <span class="key">â†‘</span> - GÃ³ra<br>
                <span class="key">â†“</span> - DÃ³Å‚
            </div>
        </div>
        <button onclick="game.restart()">RESTART (SPACJA)</button>
    </div>

    <script>
        class Paddle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 15;
                this.height = 90;
                this.speed = 7;
            }

            moveUp() {
                if (this.y > 0) {
                    this.y -= this.speed;
                }
            }

            moveDown(canvasHeight) {
                if (this.y < canvasHeight - this.height) {
                    this.y += this.speed;
                }
            }

            draw(ctx) {
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(this.x, this.y, this.width, this.height);
            }
        }

        class Ball {
            constructor(canvasWidth, canvasHeight) {
                this.canvasWidth = canvasWidth;
                this.canvasHeight = canvasHeight;
                this.size = 15;
                this.reset();
            }

            reset() {
                this.x = this.canvasWidth / 2;
                this.y = this.canvasHeight / 2;
                const direction = Math.random() > 0.5 ? 1 : -1;
                this.speedX = 5 * direction;
                this.speedY = 5 * (Math.random() > 0.5 ? 1 : -1);
            }

            move() {
                this.x += this.speedX;
                this.y += this.speedY;

                // Odbicie od gÃ³rnej i dolnej krawÄ™dzi
                if (this.y <= 0 || this.y >= this.canvasHeight - this.size) {
                    this.speedY *= -1;
                }
            }

            draw(ctx) {
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(this.x, this.y, this.size, this.size);
            }

            checkPaddleCollision(paddle) {
                return (
                    this.x < paddle.x + paddle.width &&
                    this.x + this.size > paddle.x &&
                    this.y < paddle.y + paddle.height &&
                    this.y + this.size > paddle.y
                );
            }
        }

        class Game {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.width = this.canvas.width;
                this.height = this.canvas.height;

                // Inicjalizacja obiektÃ³w
                this.paddle1 = new Paddle(30, this.height / 2 - 45);
                this.paddle2 = new Paddle(this.width - 45, this.height / 2 - 45);
                this.ball = new Ball(this.width, this.height);

                // Wyniki
                this.score1 = 0;
                this.score2 = 0;
                this.winningScore = 10;
                this.gameOver = false;
                this.winner = null;
                this.showWelcome = true;

                // Sterowanie
                this.keys = {};
                this.setupControls();

                // Start gry
                this.gameLoop();
            }

            setupControls() {
                document.addEventListener('keydown', (e) => {
                    this.keys[e.key.toLowerCase()] = true;

                    // Start gry
                    if (e.key === ' ') {
                        e.preventDefault();
                        if (this.showWelcome) {
                            this.showWelcome = false;
                        } else if (this.gameOver) {
                            this.restart();
                        }
                    }
                });

                document.addEventListener('keyup', (e) => {
                    this.keys[e.key.toLowerCase()] = false;
                });
            }

            handleInput() {
                if (!this.gameOver && !this.showWelcome) {
                    // Gracz 1
                    if (this.keys['w']) this.paddle1.moveUp();
                    if (this.keys['s']) this.paddle1.moveDown(this.height);

                    // Gracz 2
                    if (this.keys['arrowup']) this.paddle2.moveUp();
                    if (this.keys['arrowdown']) this.paddle2.moveDown(this.height);
                }
            }

            update() {
                if (!this.gameOver && !this.showWelcome) {
                    this.ball.move();

                    // Kolizja z paletkami
                    if (this.ball.checkPaddleCollision(this.paddle1) && this.ball.speedX < 0) {
                        this.ball.speedX *= -1.05;
                        // Efekt kÄ…ta odbicia
                        const paddleCenter = this.paddle1.y + this.paddle1.height / 2;
                        const ballCenter = this.ball.y + this.ball.size / 2;
                        const offset = (ballCenter - paddleCenter) / (this.paddle1.height / 2);
                        this.ball.speedY = offset * 8;
                    }

                    if (this.ball.checkPaddleCollision(this.paddle2) && this.ball.speedX > 0) {
                        this.ball.speedX *= -1.05;
                        // Efekt kÄ…ta odbicia
                        const paddleCenter = this.paddle2.y + this.paddle2.height / 2;
                        const ballCenter = this.ball.y + this.ball.size / 2;
                        const offset = (ballCenter - paddleCenter) / (this.paddle2.height / 2);
                        this.ball.speedY = offset * 8;
                    }

                    // Punkty
                    if (this.ball.x <= 0) {
                        this.score2++;
                        this.checkWinner();
                        if (!this.gameOver) this.ball.reset();
                    }

                    if (this.ball.x >= this.width) {
                        this.score1++;
                        this.checkWinner();
                        if (!this.gameOver) this.ball.reset();
                    }
                }
            }

            checkWinner() {
                if (this.score1 >= this.winningScore) {
                    this.gameOver = true;
                    this.winner = 'GRACZ 1';
                } else if (this.score2 >= this.winningScore) {
                    this.gameOver = true;
                    this.winner = 'GRACZ 2';
                }
            }

            draw() {
                // Czyszczenie ekranu
                this.ctx.fillStyle = '#000';
                this.ctx.fillRect(0, 0, this.width, this.height);

                // Linia Å›rodkowa
                this.ctx.strokeStyle = '#003300';
                this.ctx.lineWidth = 4;
                this.ctx.setLineDash([10, 10]);
                this.ctx.beginPath();
                this.ctx.moveTo(this.width / 2, 0);
                this.ctx.lineTo(this.width / 2, this.height);
                this.ctx.stroke();
                this.ctx.setLineDash([]);

                // Paletki i piÅ‚ka
                this.paddle1.draw(this.ctx);
                this.paddle2.draw(this.ctx);
                this.ball.draw(this.ctx);

                // Wyniki
                this.ctx.fillStyle = '#00ff00';
                this.ctx.font = '64px "Courier New"';
                this.ctx.textAlign = 'center';
                this.ctx.fillText(this.score1, this.width / 4, 80);
                this.ctx.fillText(this.score2, 3 * this.width / 4, 80);

                // Ekran powitalny
                if (this.showWelcome) {
                    this.drawOverlay();
                    this.ctx.fillStyle = '#00ff00';
                    this.ctx.font = '48px "Courier New"';
                    this.ctx.textAlign = 'center';
                    this.ctx.fillText('RETRO TENNIS', this.width / 2, 200);

                    this.ctx.font = '32px "Courier New"';
                    this.ctx.fillStyle = '#009900';
                    this.ctx.fillText('PONG', this.width / 2, 250);

                    this.ctx.font = '20px "Courier New"';
                    this.ctx.fillStyle = '#00ff00';
                    this.ctx.fillText('GRACZ 1: W/S', this.width / 2, 350);
                    this.ctx.fillText('GRACZ 2: â†‘/â†“', this.width / 2, 380);
                    this.ctx.fillText(`Graj do ${this.winningScore} punktÃ³w!`, this.width / 2, 420);

                    this.ctx.font = '28px "Courier New"';
                    this.ctx.fillText('NaciÅ›nij SPACJÄ˜', this.width / 2, 500);
                }

                // Ekran koÅ„cowy
                if (this.gameOver) {
                    this.drawOverlay();
                    this.ctx.fillStyle = '#00ff00';
                    this.ctx.font = '48px "Courier New"';
                    this.ctx.textAlign = 'center';
                    this.ctx.fillText(`${this.winner} WYGRYWA!`, this.width / 2, this.height / 2 - 40);

                    this.ctx.font = '24px "Courier New"';
                    this.ctx.fillText('NaciÅ›nij SPACJÄ˜', this.width / 2, this.height / 2 + 40);
                    this.ctx.fillText('aby zagraÄ‡ ponownie', this.width / 2, this.height / 2 + 70);
                }
            }

            drawOverlay() {
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
                this.ctx.fillRect(0, 0, this.width, this.height);
            }

            restart() {
                this.score1 = 0;
                this.score2 = 0;
                this.gameOver = false;
                this.winner = null;
                this.showWelcome = false;
                this.ball.reset();
                this.paddle1.y = this.height / 2 - 45;
                this.paddle2.y = this.height / 2 - 45;
            }

            gameLoop() {
                this.handleInput();
                this.update();
                this.draw();
                requestAnimationFrame(() => this.gameLoop());
            }
        }

        // Start gry
        const game = new Game();
    </script>
</body>
</html>
